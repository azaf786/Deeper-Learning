<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>E-Commerce</title>

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

</head>
<body>

<div class="row">
    <div class="col-lg-12">
        <div class="card m-5">
            <div class="card-body">
                <div class="row">
                    <div class="col-sm-12 col-md-6">
                        <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                            <ol class="carousel-indicators">
                                <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                                <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                                <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                            </ol>
                            <div class="carousel-inner">
                                <div class="carousel-item active">
                                    <img class="rounded d-block w-100" src="images/nike.jpeg" alt="First slide">
                                </div>
                                <div class="carousel-item">
                                    <img class="rounded d-block w-100" src="images/nike1.jpeg" alt="Second slide">
                                </div>
                                <div class="carousel-item">
                                    <img class="rounded d-block w-100" src="images/nike2.jpeg" alt="Third slide">
                                </div>
                            </div>
                            <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="sr-only">Previous</span>
                            </a>
                            <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="sr-only">Next</span>
                            </a>
                        </div>
                    </div>
                    <div class="col-sm-12 col-md-6">
                        <div class="card-header rounded bg-light">
                            Nike Air Max 97
                        </div>
                        <div class="card-body">
                            <h5 class="card-title">Description</h5>
                            <p class="card-text">Nike look to the past to redefine their future - these men's Air Max 97 trainers from Nike are your go-to for statement style. Inspired by the sleek look of high-speed Japanese bullet trains, a full-length Air unit takes the Swoosh's on-point impact protection next level. Arriving in a black colourway, the sneaks feature a leather and textile upper for a premium look with breathable qualities. The lower part of the upper features repeating, tonal Nike wording to add an extra dynamic to the already standout look. With the famed Waffle pattern outsole for grippy traction, the sneaks are finished with the iconic Swoosh to the sides in red.
                                <br>
                                Care & Material
                                Leather & Textile Upper/Synthetic Sole
                                <br>
                                <em>Colour:</em> Black
                                <br>
                                <em>Product Code:</em> 1200161/077390</p>

                            <a href="#" class="btn btn-info">Add to Basket</a>
                            <a href="#" class="btn btn-warning">Add to Wishlist</a>
                            <a href="#" class="btn btn-success">Checkout</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="card text-center p-3 m-5">
            <h2 class="my-4">Additional Information</h2>
        <table class="table table-striped table-light">
            <tbody>
                <tr>
                    <th>Average Rating</th>
                    <td><img class="rounded mx-auto d-block" src="images/stars.png" alt="stars rating" height="20" width="auto"></td>
                </tr>
                <tr>
                    <th>Feedback Score</th>
                    <td>78/100</td>
                </tr>
            </tbody>
        </table>

        </div>

        <div class="card p-3 m-5">
            <h2 class="my-4 text-center">Recent Reviews</h2>
            <div class="class bg-light rounded p-2 m-2">
                <b class="color p-4">Abdullah Zafar</b>
                <img class="rounded mx-auto" src="images/stars.png" alt="stars rating" height="20" width="auto">
                <p class="p-4"><span>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aperiam, cumque doloremque eligendi excepturi, hic laborum laudantium molestiae quisquam reprehenderit, sint veniam voluptas. Deserunt dolore dolorum facere harum officia rem, velit!</span><span>Distinctio dolorum earum laudantium magni possimus quidem veniam. Architecto doloremque harum nesciunt porro possimus reprehenderit sunt voluptatibus? Ad commodi ducimus eaque harum in magni reiciendis! Distinctio exercitationem expedita repellat ut!</span><span>Ab blanditiis deleniti laborum minus quos velit. Accusamus labore quis similique sunt vel! Asperiores doloribus eligendi esse, et illum ipsum laborum maxime perspiciatis quod repellendus. Aspernatur consequatur culpa impedit reprehenderit!</span><span>Consequuntur corporis, delectus dicta dignissimos distinctio eaque eius, eligendi et eum eveniet facere id ipsam iusto labore laudantium libero praesentium quibusdam quo ratione recusandae repellat reprehenderit sint sit soluta unde?</span><span>Est facere iure minus molestiae quod. Asperiores eligendi eveniet facilis fugit inventore maiores maxime officia quaerat quia quibusdam! Ad atque blanditiis dolorem, ducimus eum maiores nihil optio perspiciatis repellendus totam.</span></p>
                <p class="p-4">Date Added: <span>26 July 2021</span></p>
            </div>

            <div class="class bg-light rounded p-2 m-2">
                <b class="color p-4">Jeremy Coates</b>
                <img class="rounded mx-auto" src="images/stars.png" alt="stars rating" height="20" width="auto">
                <p class="p-4"><span>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aperiam, cumque doloremque eligendi excepturi, hic laborum laudantium molestiae quisquam reprehenderit, sint veniam voluptas. Deserunt dolore dolorum facere harum officia rem, velit!</span><span>Distinctio dolorum earum laudantium magni possimus quidem veniam. Architecto doloremque harum nesciunt porro possimus reprehenderit sunt voluptatibus? Ad commodi ducimus eaque harum in magni reiciendis! Distinctio exercitationem expedita repellat ut!</span><span>Ab blanditiis deleniti laborum minus quos velit. Accusamus labore quis similique sunt vel! Asperiores doloribus eligendi esse, et illum ipsum laborum maxime perspiciatis quod repellendus. Aspernatur consequatur culpa impedit reprehenderit!</span><span>Consequuntur corporis, delectus dicta dignissimos distinctio eaque eius, eligendi et eum eveniet facere id ipsam iusto labore laudantium libero praesentium quibusdam quo ratione recusandae repellat reprehenderit sint sit soluta unde?</span><span>Est facere iure minus molestiae quod. Asperiores eligendi eveniet facilis fugit inventore maiores maxime officia quaerat quia quibusdam! Ad atque blanditiis dolorem, ducimus eum maiores nihil optio perspiciatis repellendus totam.</span></p>
                <p class="p-4">Date Added: <span>30 Aug 2021</span></p>
            </div>
        </div>

        <div id="checkins" class="card p-3 m-5">
            <h2 class="my-4 text-center">Recent Checkins</h2>
        </div>
    </div>

</div>

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

<script src="https://unpkg.com/flickity@2/dist/flickity.pkgd.min.js"></script>
<script src="https://kit.fontawesome.com/a076d05399.js"></script>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="index.js"></script>
<script>
    axios.get("http://localhost:8080/checkins")
        .then(function(response){
            console.log(response.data);
            if(response.data.length === 0){
                $('<div>').text('No reviews available.').appendTo('#reviews');
                return;
            }

            for(var i=0; i < response.data.length; i++){
                var checkin = $('<div>').addClass('card p-3 m-2 rounded bg-light');
                var h3 = $('<h3>').text(response.data[i].name).appendTo(checkin);
                var starRating = $('<div>').addClass('star-rating');
                var checkinRating = response.data[i].rating*20;
                console.log(checkinRating);
                $('<div>').css('width', checkinRating + '%').appendTo(starRating);

                switch (checkinRating){

                    case 20:
                        var h4 = $('<p>').appendTo(checkin);
                        $('<i>').addClass('fas fa-star').appendTo(h4);
                        break;


                    case 40:
                        var h4 = $('<p>').appendTo(checkin);
                        $('<i>').addClass('fas fa-star').appendTo(h4);
                        $('<i>').addClass('fas fa-star').appendTo(h4);
                        break;

                    case 60:
                        var h4 = $('<p>').appendTo(checkin);
                        $('<i>').addClass('fas fa-star').appendTo(h4);
                        $('<i>').addClass('fas fa-star').appendTo(h4);
                        $('<i>').addClass('fas fa-star').appendTo(h4);
                        break;

                    case 80:
                        var h4 = $('<p>').appendTo(checkin);
                        $('<i>').addClass('fas fa-star').appendTo(h4);
                        $('<i>').addClass('fas fa-star').appendTo(h4);
                        $('<i>').addClass('fas fa-star').appendTo(h4);
                        $('<i>').addClass('fas fa-star').appendTo(h4);
                        break;

                    case 100:
                        var h4 = $('<p>').appendTo(checkin);
                        $('<i>').addClass('fas fa-star').appendTo(h4);
                        $('<i>').addClass('fas fa-star').appendTo(h4);
                        $('<i>').addClass('fas fa-star').appendTo(h4);
                        $('<i>').addClass('fas fa-star').appendTo(h4);
                        $('<i>').addClass('fas fa-star').appendTo(h4);
                        break;

                    default:
                        $('<p>').text('No ratings found').appendTo(checkin);
                }



                // $(".star-rating").append('<i class="fas fa-star"></i>').appendTo(h3);

                // var h4 = $('<p>' ).text(checkinRating).appendTo(checkin);
                //
                // $('<i>').addClass('fas fa-star').appendTo(h4);

                $('<p>').text(response.data[i].review).appendTo(checkin);

                function formatDate(date) {
                    var hours = date.getHours();
                    var minutes = date.getMinutes();
                    var ampm = hours >= 12 ? 'pm' : 'am';
                    hours = hours % 12;
                    hours = hours ? hours : 12; // the hour '0' should be '12'
                    minutes = minutes < 10 ? '0'+minutes : minutes;
                    var strTime = hours + ':' + minutes + ' ' + ampm;
                    return (date.getMonth()+1) + "/" + date.getDate() + "/" + date.getFullYear() + "  " + strTime;
                }

                var date = new Date(response.data[i].dateTime);
                 var formattedDate = formatDate(date);
                $('<p>').text(formattedDate).appendTo(checkin);

                $('#checkins').append(checkin);


            }

        })
        .catch(function(e){
            console.log(e);
        });
</script>

</body>
</html>