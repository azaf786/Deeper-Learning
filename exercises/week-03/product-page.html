<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Products</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

</head>
<body class="p-4">

<div class="container">
    <div class="card p-4">
        <div class="row">
            <div class="col-md-6 col-sm-12 text-center p-4">
<!--                <img src="images/nike.jpeg" alt="shoes" class="img-fluid">-->
<!--                <div class="row py-2">-->
<!--                    <div class="col-4"><img src="images/nike.jpeg" width="150" height="100" alt="shoes"-->
<!--                                            class="img-fluid"></div>-->
<!--                    <div class="col-4"><img src="images/nike1.jpeg" width="150" height="100" alt="shoes"-->
<!--                                            class="img-fluid"></div>-->
<!--                    <div class="col-4"><img src="images/nike2.jpeg" width="150" height="100" alt="shoes"-->
<!--                                            class="img-fluid"></div>-->
<!--                </div>-->
                <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                    <ol class="carousel-indicators">
                        <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                        <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                        <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                    </ol>
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img class="rounded d-block w-100" src="images/nike.jpeg" alt="First slide">
                        </div>
                        <div class="carousel-item">
                            <img class="rounded d-block w-100" src="images/nike1.jpeg" alt="Second slide">
                        </div>
                        <div class="carousel-item">
                            <img class="rounded d-block w-100" src="images/nike2.jpeg" alt="Third slide">
                        </div>
                    </div>
                    <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            </div>
            <div class="col-md-6 col-sm-12">
                <h1 class="card-title">Description</h1>
                <p class="card-text">Nike look to the past to redefine their future - these men's Air Max 97 trainers from Nike are your go-to for statement style. Inspired by the sleek look of high-speed Japanese bullet trains, a full-length Air unit takes the Swoosh's on-point impact protection next level. Arriving in a black colourway, the sneaks feature a leather and textile upper for a premium look with breathable qualities. The lower part of the upper features repeating, tonal Nike wording to add an extra dynamic to the already standout look. With the famed Waffle pattern outsole for grippy traction, the sneaks are finished with the iconic Swoosh to the sides in red.
                    <br>
                    Care & Material
                    Leather & Textile Upper/Synthetic Sole
                    <br>
                    <em>Colour:</em> Black
                    <br>
                    <em>Product Code:</em> 1200161/077390</p>

                <a href="#" class="btn btn-info">Add to Basket</a>
                <a href="#" class="btn btn-warning">Add to Wishlist</a>
                <a href="#" class="btn btn-success">Checkout</a>
            </div>
        </div>

        <div class="card p-2 m-2">
            <h2 class="m-2">Additional Information</h2>
            <table class="table badge-danger table-bordered">
                <tbody>
                <tr>
                    <th>Average Rating</th>
                    <td><img src="images/stars.png" class="img-fluid" width="80px" height="50px" alt="product rating"></td>
                </tr>
                <tr>
                    <th>Another Stat</th>
                    <td>90/100</td>
                </tr>
                <tr>
                    <th>Yea just another Stat</th>
                    <td>something something</td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="card p-2 m-2">
            <h2 class="m-2">Recent Checkins</h2>
            <div id="checkins">

            </div>

        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
<script src="https://kit.fontawesome.com/a076d05399.js"></script>

<!--Axios-->
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
    axios.get('http://localhost:8080/checkins')
    .then(function (response) {
        console.log(response.data);

        if(response.data.length === 0){
            $('<div>').text('No checkins found').css({'color': 'red', 'padding-left': '8px'}).appendTo('#checkins');
            return;
        }

        for(var i=0; i < response.data.length; i++){
            var checkinEl = $('<div>').addClass('card p-4 my-4');

            var h3 = $('<h3>').text(response.data[i].name).appendTo(checkinEl);
            var starRating = $('<div>').addClass('star-rating');

            var checkinRating = response.data[i].rating * 20;
            $('<div>').css('width', checkinRating + '%').appendTo(starRating);
            starRating.appendTo(h3);
            $('<p>').text(response.data[i].review).appendTo(checkinEl);

            $('#checkins').append(checkinEl);

            function checkRating(x){
                console.log(x);
                var h4 = $('<p>').appendTo(checkinEl);
                for(var i=0; i <=x; i++){
                     i = i + 20;
                    console.log('I am i' +i);

                    h4 = $('<i>').addClass('fas fa-star').appendTo(h4);
                    console.log(h4);
                }

            }

            checkRating(checkinRating);

            function formatDate(date) {
                var hours = date.getHours();
                var minutes = date.getMinutes();
                var ampm = hours >= 12 ? 'pm' : 'am';
                hours = hours % 12;
                hours = hours ? hours : 12; // the hour '0' should be '12'
                minutes = minutes < 10 ? '0'+minutes : minutes;
                var strTime = hours + ':' + minutes + ' ' + ampm;
                return (date.getMonth()+1) + "/" + date.getDate() + "/" + date.getFullYear() + "  " + strTime;
            }

            var date = new Date(response.data[i].dateTime);
            var formattedDate = formatDate(date);
            $('<p>').text(formattedDate).appendTo(checkinEl);

            $('#checkins').append(checkinEl);

        }
    })
    .catch(function(error){
        console.log('AXIOS ERROR'+ error);
    })
</script>

</body>
</html>